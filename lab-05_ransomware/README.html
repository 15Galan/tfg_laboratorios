<h1 id="ataque-de-ransomware">Ataque de Ransomware</h1>

<p>El Ransomware es un tipo de malware tan sencillo como peligroso, cuyo objetivo es cifrar los archivos de un sistema,
    inhabilitando el acceso para sus usuarios y sus servicios.</p>

<p>Los ataques de ransomware consisten precisamente en la infección de un sistema con este tipo de malware, y la
    posterior petición de un rescate para recuperar los archivos cifrados a cambio de una gran suma de dinero por la
    clave de descifrado. No obstante, nunca hay garantías de que dicha clave funcione. Aquí algunos ejemplos:</p>

<ul>
    <li>Los atacantes no tienen la capacidad de descifrar los archivos en muchas ocasiones, y simplemente se aprovechan
        de la desesperación de las víctimas para obtener dinero fácil.</li>
    <li>Los atacantes sí tienen la capacidad de descifrar los archivos, pero no lo hacen, ya que no tienen ningún
        incentivo para hacerlo.</li>
    <li>Los atacantes sí descifran los archivos, pero no lo hacen correctamente, y los archivos descifrados quedan
        corruptos e inservibles.</li>
</ul>

<p>Este tipo de ataques se han vuelto muy populares en los últimos años, y han afectado a empresas y organizaciones de
    todo tipo, desde pequeñas start-ups hasta grandes corporaciones, pasando por instituciones gubernamentales,
    educativas y hasta centros hospitalarios. Tanto es así que actualmente existe un término conocido como <strong>RaaS
        (<em>Ransomware as a Service</em>)</strong>, que se refiere a la venta de kits de ransomware en la <em>Dark
        Web</em>, lo que permite a cualquier persona llevar a cabo este tipo de ataques, sin necesidad de tener
    conocimientos técnicos avanzados.</p>

<p>El impacto de estos ataques puede ser devastador, ya que los archivos cifrados pueden contener información crítica
    para el funcionamiento de la organización, y la pérdida de esta información puede llevar a la quiebra de la misma.
    Sin embargo, pese a la gravedad de estos ataques, el malware utilizado para llevarlos a cabo no es particularmente
    sofisticado, y en muchos casos se puede evitar su ejecución con medidas de seguridad básicas.</p>


<h2 id="ejemplos">Ejemplos</h2>

<h3 id="peyta">Peyta</h3>

<p>Descubierto por primera vez en marzo de 2016, este malware afectaba principalmente a sistemas operativos Windows y se
    propagaba a través de archivos adjuntos de correo electrónico maliciosos o enlaces de descarga comprometidos.</p>

<p>Peyta cifraba los archivos en el sistema de la víctima y exigía un rescate en Bitcoin para restaurar el acceso a los
    datos; fue particularmente dañino debido a su capacidad para propagarse rápidamente a través de redes empresariales.
</p>

<h3 id="notpeyta">NotPeyta</h3>

<p>También conocido como <em>Petya.A</em>, <em>ExPetr</em>, o <em>Nyetya</em>, fue un ciberataque importante que ocurrió
    en junio de 2017. Aunque inicialmente se creía que era una variante de Peyta, posteriormente se descubrió que era un
    malware completamente nuevo.</p>

<p>NotPetya se propagó utilizando una técnica llamada &quot;actualización falsa&quot;, donde se disfrazaba como una
    actualización de software legítima. Una vez infectado un sistema, NotPetya cifraba los archivos y sobrescribía el
    MBR (<em>Master Boot Record</em>) del disco duro, lo que impedía que el sistema operativo se iniciara. Este malware
    tuvo un impacto significativo en muchas organizaciones en todo el mundo.</p>

<h3 id="wannacry">WannaCry</h3>

<p>Posiblemente el ransomware más conocido debido a su alcance masivo: aproximadamente 150 países fueron afectados.</p>

<p>El ataque tuvo lugar en mayo de 2017 y se aprovechó de una vulnerabilidad en el protocolo de comunicación SMB de
    Windows, conocida como EternalBlue.</p>

<p>WannaCry se propagaba automáticamente a través de redes y cifraba los archivos de las víctimas, exigiendo un rescate
    en Bitcoin para su desbloqueo. Este ataque afectó a cientos de miles de sistemas en todo el mundo, incluyendo
    hospitales, empresas y organismos gubernamentales.</p>


<h1 id="laboratorio">Laboratorio</h1>

<p>Este laboratorio contiene una muestra de ransomware muy simple, pero igualmente peligrosa si no se trata con cuidado.
    EL ransomware se llama <code>stockholm.py</code> y ha sido desarrollado en Python.</p>

<p>El script se encuentra en el directorio del usuario <code>root</code> y realizará las siguientes acciones:</p>

<ol>
    <li>Creará una clave de cifrado aleatoria.</li>
    <li>Buscará una carpeta llamada <em>infection</em> en la carpeta del usuario <code>root</code>.</li>
    <li>Usando la clave, cifrará todos los archivos de la carpeta <em>infection</em> cuya extensión también fuera
        afectada por WannaCry.</li>
    <li>Guardará la clave de cifrado de forma segura en un archivo llamado <em>clave.key</em>.</li>
</ol>

<p>No obstante, como solo es un ejemplo, el script también puede devolver los archivos a su estado original, siempre y
    cuando se le proporcione la clave de cifrado correcta; para ello, basta con ejecutar
    <code>stockholm.py -r &lt;clave&gt;</code> y revertirá el cifrado.
</p>

<blockquote>
    <p><strong>Nota</strong><br>Por eso es importante que la clave de cifrado jamás sea cifrada por el propio
        ransomware; si esto sucediera sería imposible recuperar los archivos.</p>
</blockquote>

<p>El objetivo de este laboratorio es que observes el funcionamiento de un ransomware y expermientes con él para que
    puedas entender mejor cómo funcionan y cómo se pueden evitar.</p>


<h1 id="referencias">Referencias</h1>

<ul>
    <li><a href="https://es.wikipedia.org/wiki/WannaCry">WannaCry</a></li>
    <li><a href="https://es.wikipedia.org/wiki/Petya_(malware)">Petya</a></li>
    <li><a href="https://es.wikipedia.org/wiki/NotPetya">NotPetya</a></li>
    <li><a href="https://github.com/15Galan/42malaga_bootcamp-ciberseguridad/tree/master/stockholm">Script
            stockholm.py</a></li>
</ul>